RISCOF
======

`RISCOF <https://riscof.readthedocs.io>`_ is a RISC-V architectural test checking tool. This tool hosts a
suite of tests which are currently included in the official RISC-V architectural test suites. 

This plugin uses the RISCOF tool to filter and select tests that should be run on the DUT. 
All tests generated generated by this plugin are compliant with the official `Test Format Spec <https://riscof.readthedocs.io/en/latest/testformat.html>`_.

Installation
------------
1. Install `RISCOF`


   The easiest way to  install `riscof` is to use `pip`.

   .. code-block:: console
       
       $ pip install -U riscof


Configuring the Plugin
----------------------

You will need to create a ``config.ini`` as per RISCOF's specification provided `here <https://riscof.readthedocs.io/en/stable/plugins.html#config-ini-syntax>`_. 
Secnodly you will also need to create the relevant plugin files: 

  - yaml specs
  - python plugin files
  - model_test.h header files
  - linker file (must be named link.ld)

Please refer to `Generate Templates <https://riscof.readthedocs.io/en/stable/plugins.html#generate-templates>`_ section of RISCOF for
more details on how to create the above files.

An example of the above files for chromite can be found in the ``riscof_plugin`` directory of the
`Chromite_verilator plugin
<https://github.com/incoresemi/river_core_plugins/tree/master/dut_plugins/cclass_verilator_plugin>`_

Output from the plugin
----------------------

The gen hook of the plugin must return a dictionary of the test and their attributes as defined by
the :ref:`Test List Format <testlist>`.

Instance in ``config.ini``
--------------------------

To use RISCV_CTG in the config.ini the following template can be followed:

.. code-block:: ini

   path_to_suite = ~/river_core_plugins/generator_plugins
   generator = riscof

   [riscof]
   jobs = 8
   count = 1
   seed = random
   # path to the config.ini to be used by riscof.
   riscof_config=/scratch/git-repo/incoresemi/river-framework/core-verification/river_core_plugins/dut_plugins/chromite_verilator_plugin/riscof_plugin/config.ini


